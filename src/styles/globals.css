/* Import KaTeX CSS for math rendering */
@import 'katex/dist/katex.min.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Prevent page-level scrolling - only chat area should scroll */
html,
body {
  overflow: hidden;
  height: 100%;
  margin: 0;
  padding: 0;
}

#__next {
  height: 100%;
}

/* Custom KaTeX styling */
.math-content {
  line-height: 1.6;
}

/* Inline math should flow with text */
.math-content .katex {
  font-size: inherit;
}

/* Block math should be centered with spacing */
.math-content .katex-display {
  margin: 1rem 0;
  text-align: center;
  overflow-x: auto;
  overflow-y: hidden;
}

/* Error styling for failed LaTeX rendering */
.katex-error {
  color: #dc2626;
  background-color: #fef2f2;
  padding: 0.125rem 0.25rem;
  border-radius: 0.25rem;
  font-family: monospace;
  font-size: 0.875em;
  cursor: help;
}

/* Make KaTeX work well in colored message bubbles */
.bg-blue-600 .katex {
  color: white;
}

.bg-gray-200 .katex {
  color: #111827;
}

/* Custom dark mode utility classes */
@layer components {
  /* Card/Container backgrounds */
  .card-bg {
    @apply bg-white dark:bg-gray-800 dark:shadow-xl;
  }

  .card-secondary-bg {
    @apply bg-gray-100 dark:bg-gray-700;
  }

  /* Text colors */
  .text-primary {
    @apply text-gray-900 dark:text-gray-100;
  }

  .text-secondary {
    @apply text-gray-600 dark:text-gray-400;
  }

  .text-tertiary {
    @apply text-gray-500 dark:text-gray-400;
  }

  .text-heading {
    @apply text-gray-900 dark:text-gray-100;
  }

  .text-label {
    @apply text-gray-700 dark:text-gray-300;
  }

  /* Border colors */
  .border-primary {
    @apply border-gray-300 dark:border-gray-600;
  }

  .border-secondary {
    @apply border-gray-200 dark:border-gray-700;
  }

  /* Input field */
  .input-field {
    @apply px-4 py-3 border border-primary card-bg text-primary placeholder-gray-500 dark:placeholder-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent;
  }

  .input-field:disabled {
    @apply bg-gray-100 dark:bg-gray-800 cursor-not-allowed;
  }

  /* Buttons */
  .btn-primary {
    @apply px-6 py-3 rounded-lg font-medium text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 transition-colors;
  }

  .btn-primary:disabled {
    @apply bg-gray-300 dark:bg-gray-600 cursor-not-allowed;
  }

  .btn-secondary {
    @apply px-4 py-2 text-sm font-medium text-label bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors;
  }

  /* Alert/Message boxes */
  .alert-error {
    @apply p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-400 text-sm;
  }

  .alert-warning {
    @apply p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg text-yellow-700 dark:text-yellow-400;
  }

  .alert-info {
    @apply p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg;
  }

  /* Tab button */
  .tab-button {
    @apply px-4 py-2 font-medium text-sm transition-colors;
  }

  .tab-button-active {
    @apply text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400;
  }

  .tab-button-inactive {
    @apply text-secondary hover:text-gray-900 dark:hover:text-gray-100;
  }

  /* Message bubbles */
  .message-student {
    @apply bg-blue-600 dark:bg-blue-500 text-white;
  }

  .message-tutor {
    @apply bg-gray-200 dark:bg-gray-700 text-primary;
  }

  /* Dropzone */
  .dropzone {
    @apply border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors border-primary hover:border-gray-400 dark:hover:border-gray-500;
  }

  .dropzone-active {
    @apply border-blue-500 bg-blue-50 dark:bg-blue-900/20;
  }
}
